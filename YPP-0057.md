# Proposal

Deploy NotionalJoinFactory.sol

# Background

NotionalJoinFactory deploys a new notional join using create2 by referencing the prior quarter's notional join for said collateral type.

# Details

1. Deploy NotionalJoinFactory
2. Grant Timelock roles: ROOT, deploy(), point()
3. Grant Cloak role: ROOT
4. Revoke role on Deployer: ROOT


Governance scripts can be found here:
[deployNotionalJoinFactory.ts](https://github.com/yieldprotocol/environments-v2/blob/34e871af772971178a42f5749da6c93f41f9bd24/scripts/governance/deploy/deployNotionalJoinFactory.ts) 
[deployNotionalJoinFactory.sh](https://github.com/yieldprotocol/environments-v2/blob/34e871af772971178a42f5749da6c93f41f9bd24/scripts/governance/deploy/deployNotionalJoinFactory.sh)

# Testing

The testing is done on [NotionalJoinFactoryTest.t.sol](https://github.com/yieldprotocol/environments-v2/blob/34e871af772971178a42f5749da6c93f41f9bd24/test/foundry/NotionalJoinFactoryTest.t.sol)

The proposal approval & execution were tested on tenderly:

Proposal log (localhost)

```bash
[Running] /bin/bash "/home/rjp/Desktop/test/environments-v2/scripts/governance/deploy/deployNotionalJoinFactory.sh"
++ dirname /home/rjp/Desktop/test/environments-v2/scripts/governance/deploy/deployNotionalJoinFactory.sh
+ HERE=/home/rjp/Desktop/test/environments-v2/scripts/governance/deploy
+ export CONF=/home/rjp/Desktop/test/environments-v2/scripts/governance/base.mainnet.config
+ CONF=/home/rjp/Desktop/test/environments-v2/scripts/governance/base.mainnet.config
+ RUN='npx hardhat run --network localhost'
+ npx hardhat run --network localhost /home/rjp/Desktop/test/environments-v2/scripts/governance/deploy/deployNotionalJoinFactory.ts
Impersonating 0xC7aE076086623ecEA2450e364C838916a043F9a8 on localhost
cloak: 0xaa7B33685e9730B4D700b8F3F190EcA5EC4cf106
timelock: 0x3b870db67a45611CF4723d44487EAF398fAc51E3
ladle: 0x6cB18fF2A33e981D1e38A663Ca056c0a5265066A
NotionalJoinFactory deployed at 0x68E9e0d89F96F40A98d3F42DC22430aBbF662a1A
npx hardhat verify --network localhost 0x68E9e0d89F96F40A98d3F42DC22430aBbF662a1A 0x6cB18fF2A33e981D1e38A663Ca056c0a5265066A 
notionalJoinFactory.grantRoles(ROOT, timelock)
notionalJoinFactory.grantRoles(ROOT, cloak)
notionalJoinFactory.revokeRole(ROOT, deployer)
deployer has root: false
completed
```